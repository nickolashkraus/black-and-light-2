<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    {{ if .Site.Params.description }}<meta name="description" content="{{ .Site.Params.description }}">{{ end }}

    <link href="https://fonts.googleapis.com/css?family=Old+Standard+TT:400,400i,700|Open+Sans:400,400i,600,600i&display=swap" rel="stylesheet" type='text/css'>

    <link rel="icon" type="image/png" href="/favicon.png" sizes="16x16">

    <title>
      {{ $url := replace .Permalink ( printf "%s" .Site.BaseURL) "" }}
      {{ if eq $url "" }}
        {{ .Site.Title }}
      {{ else }}
        {{ if .Params.heading }}
          {{ .Params.heading }}
        {{ else if .Title }}
          {{ .Title }}
        {{ else if .Section }}
          {{ .Section | title }}
        {{ else }}
        {{ end }}
      {{ end }}
    </title>
    <link rel="canonical" href="{{ .Permalink }}">

    <!--
      CSS

      See 'Creating a resource from template' for documentation:
        * https://gohugo.io/hugo-pipes/resource-from-template

      TODO:
      In v0.80.0, Dart Sass support was added to Hugo. Add the `transpiler`
      option to specify transpiler:

        > The transpiler to use, valid values are libsass (default) and
          dartsass. Note that the Embedded Dart Sass project is still in beta.
          We will try to improve the installation process when it has stable
          releases, but if you want to use Hugo with Dart Sass you need to
          download a release binary from Embedded Dart Sass (Hugo after 0.81.0
          requires beta 6 or newer) and make sure it’s in your PC’s $PATH (or
          %PATH% on Windows).

      Source: https://gohugo.io/hugo-pipes/scss-sass
    -->
    {{ if .Site.IsServer }}
    {{ $sassTemplate := resources.Get "scss/style.scss" }}
    {{ $style := $sassTemplate | resources.ExecuteAsTemplate "style.scss" . | resources.ToCSS (dict "targetPath" "css/style.css" "enableSourceMap" true) }}
    <link rel="stylesheet" href="{{ ($style).RelPermalink }}">
    {{ else }}
    {{ $sassTemplate := resources.Get "scss/style.scss" }}
    {{ $style := $sassTemplate | resources.ExecuteAsTemplate "style.scss" . | resources.ToCSS (dict "targetPath" "css/style.css" "enableSourceMap" false ) }}
    <link rel="stylesheet" href="{{ ($style | minify | fingerprint).RelPermalink }}">
    {{ end }}

    {{ if eq .Site.Params.mode "dark" }}
      {{ partial "styles-dark.html" . }}
    {{ end  }}

    {{ if eq .Site.Params.mode "light" }}
      {{ partial "styles-light.html" . }}
    {{ end  }}

    {{ range .AlternativeOutputFormats -}}
      {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
    {{ end -}}
  </head>

  <body>
    <section id=nav>
      <h1><a href="/">{{ .Site.Params.sitename }}</a></h1>
      <ul>
        {{ range .Site.Menus.main }}
          <li><a href="{{ .URL }}">{{ .Name }}</a></li>
        {{ end }}
      </ul>
      <ul>
        {{ range .Site.Menus.secondary }}
          <li><a href="{{ .URL }}">{{ .Name }}</a></li>
        {{ end }}
      </ul>
    </section>
